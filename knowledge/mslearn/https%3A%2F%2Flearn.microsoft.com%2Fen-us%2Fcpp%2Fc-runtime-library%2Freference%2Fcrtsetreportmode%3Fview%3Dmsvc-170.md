---
title: "_CrtSetReportMode"
source: "https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/crtsetreportmode?view=msvc-170"
source_tag: "mslearn"
license: "CC BY 4.0"
license_url: "https://creativecommons.org/licenses/by/4.0/"
attribution: "Â© Microsoft Learn (CC BY 4.0)"
---
Specifies the destination or destinations for a specific report type generated by `_CrtDbgReport` and any macros that call [`_CrtDbgReport`, `_CrtDbgReportW`](https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/crtdbgreport-crtdbgreportw?view=msvc-170), such as [`_ASSERT`, `_ASSERTE`, `_ASSERT_EXPR` macros](https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/assert-asserte-assert-expr-macros?view=msvc-170) and [`_RPT`, `_RPTF`, `_RPTW`, `_RPTFW` macros](https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/rpt-rptf-rptw-rptfw-macros?view=msvc-170) (debug version only).

## Syntax

```
int _CrtSetReportMode(
   int reportType,
   int reportMode
);
```

### Parameters

_`reportType`_  
Report type: `_CRT_WARN`, `_CRT_ERROR`, and `_CRT_ASSERT`.

_`reportMode`_  
New report mode or modes for _`reportType`_.

## Return value

On successful completion, **`_CrtSetReportMode`** returns the previous report mode or modes for the report type specified in _`reportType`_. If an invalid value is passed in as _`reportType`_ or an invalid mode is specified for _`reportMode`_, **`_CrtSetReportMode`** invokes the invalid parameter handler as described in [Parameter validation](https://learn.microsoft.com/en-us/cpp/c-runtime-library/parameter-validation?view=msvc-170). If execution is allowed to continue, this function sets `errno` to `EINVAL` and returns -1. For more information, see [`errno`, `_doserrno`, `_sys_errlist`, and `_sys_nerr`](https://learn.microsoft.com/en-us/cpp/c-runtime-library/errno-doserrno-sys-errlist-and-sys-nerr?view=msvc-170).

**`_CrtSetReportMode`** specifies the output destination for **`_CrtDbgReport`**. Because the macros [`_ASSERT`](https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/assert-asserte-assert-expr-macros?view=msvc-170), [`_ASSERTE`](https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/assert-asserte-assert-expr-macros?view=msvc-170), [`_RPT`](https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/rpt-rptf-rptw-rptfw-macros?view=msvc-170), and [`_RPTF`](https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/rpt-rptf-rptw-rptfw-macros?view=msvc-170) call **`_CrtDbgReport`**, **`_CrtSetReportMode`** specifies the output destination of text specified with those macros.

When [`_DEBUG`](https://learn.microsoft.com/en-us/cpp/c-runtime-library/debug?view=msvc-170) isn't defined, calls to **`_CrtSetReportMode`** are removed during preprocessing.

If you don't call **`_CrtSetReportMode`** to define the output destination of messages, then the following defaults are in effect:

*   Assertion failures and errors are directed to a debug message window.
    
*   Warnings from Windows applications are sent to the debugger's output window.
    
*   Warnings from console applications aren't displayed.
    

The following table lists the report types defined in `Crtdbg.h`.

Report type

Description

`_CRT_WARN`

Warnings, messages, and information that doesn't need immediate attention.

`_CRT_ERROR`

Errors, unrecoverable problems, and issues that require immediate attention.

`_CRT_ASSERT`

Assertion failures (asserted expressions that evaluate to `FALSE`).

The **`_CrtSetReportMode`** function assigns the new report mode specified in _`reportMode`_ to the report type specified in _`reportType`_ and returns the previously defined report mode for _`reportType`_. The following table lists the available choices for _`reportMode`_ and the resulting behavior of **`_CrtDbgReport`**. These options are defined as bit flags in Crtdbg.h.

Report mode

\_CrtDbgReport behavior

`_CRTDBG_MODE_DEBUG`

Writes the message to the debugger's output window.

`_CRTDBG_MODE_FILE`

Writes the message to a user-supplied file handle. [`_CrtSetReportFile`](https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/crtsetreportfile?view=msvc-170) should be called to define the specific file or stream to use as the destination.

`_CRTDBG_MODE_WNDW`

Creates a message box to display the message along with the **Abort**, **Retry**, and **Ignore** buttons.

`_CRTDBG_REPORT_MODE`

Returns _`reportMode`_ for the specified _`reportType`_:

1 `_CRTDBG_MODE_FILE`

2 `_CRTDBG_MODE_DEBUG`

4 `_CRTDBG_MODE_WNDW`

Each report type can be reported using one, two, or three modes or no mode at all. Therefore, it's possible to have more than one destination defined for a single report type. For example, the following code fragment causes assertion failures to be sent to both a debug message window and to **`stderr`**:

```
_CrtSetReportMode( _CRT_ASSERT, _CRTDBG_MODE_FILE | _CRTDBG_MODE_WNDW );
_CrtSetReportFile( _CRT_ASSERT, _CRTDBG_FILE_STDERR );
```

In addition, you can control the reporting mode or modes for each report type separately. For example, it's possible to specify that a _`reportType`_ of `_CRT_WARN` goes to an output debug string, while `_CRT_ASSERT` is displayed using a debug message window and is sent to **`stderr`**, as previously illustrated.

## Requirements

Routine

Required header

Optional header

**`_CrtSetReportMode`**

`<crtdbg.h>`

`<errno.h>`

For more compatibility information, see [Compatibility](https://learn.microsoft.com/en-us/cpp/c-runtime-library/compatibility?view=msvc-170).

**Libraries:** Debug versions of the [C runtime libraries](https://learn.microsoft.com/en-us/cpp/c-runtime-library/crt-library-features?view=msvc-170) only.

## See also

[Debug routines](https://learn.microsoft.com/en-us/cpp/c-runtime-library/debug-routines?view=msvc-170)